# Flash位图字体分析器

## 🎯 项目简介

这是一个专为STM32G4 W25Q128JV Flash芯片设计的位图字体数据可视化分析工具。能够解析从Flash中提取的字体位图数据，并提供直观的可视化界面来查看和验证字符位图。

## ✨ 主要功能

### 📁 文件处理
- **拖拽上传**：支持拖拽.bin文件到上传区域
- **格式验证**：自动验证字体文件格式和数据完整性
- **大文件支持**：高效处理2MB+的字体数据文件

### 🔍 字符分析
- **完整解析**：解析字体文件头部、字符信息表和位图数据
- **字符统计**：显示字符总数、文件大小等基本信息
- **格式识别**：自动识别1位单色位图格式

### 🎨 可视化显示
- **网格视图**：以网格形式展示所有字符的缩略图
- **分类浏览**：按数字、大写字母、小写字母、中文、符号分类
- **搜索功能**：支持按字符或Unicode码点搜索
- **详细视图**：点击字符查看大图和详细信息

### 🔧 交互功能
- **多级缩放**：支持1x、4x、8x、16x缩放显示
- **像素级渲染**：使用Canvas API精确渲染每个像素
- **导出功能**：将单个字符导出为PNG图片
- **响应式设计**：支持桌面和移动设备

## 🚀 使用方法

### 1. 准备数据文件
使用STM32G4 Flash编程器从W25Q128JV芯片中提取字体数据：
```bash
./flash-programmer-tool --port /dev/ttyUSB0 read \
  --file font_bitmap_extracted.bin \
  --address 0x20000 --size 0x200000
```

### 2. 打开网页应用
在浏览器中打开 `index.html` 文件

### 3. 上传字体文件
- 点击上传区域选择文件，或
- 直接拖拽.bin文件到上传区域

### 4. 浏览和分析
- 使用左侧分类按钮筛选字符类型
- 在搜索框中输入字符或Unicode码点
- 点击字符查看详细信息和大图
- 使用缩放控制调整显示大小
- 点击导出按钮保存字符图片

## 📊 支持的字符类型

### 🔢 数字 (0-9)
- Unicode范围: U+0030 - U+0039
- 包含所有阿拉伯数字

### 🔠 大写字母 (A-Z)
- Unicode范围: U+0041 - U+005A
- 包含所有英文大写字母

### 🔡 小写字母 (a-z)
- Unicode范围: U+0061 - U+007A
- 包含所有英文小写字母

### 🀄 中文字符
- Unicode范围: U+4E00 - U+9FFF
- 包含常用汉字和扩展字符

### 🔣 符号
- 各种标点符号和特殊字符
- ASCII符号范围

## 🛠️ 技术实现

### 前端技术栈
- **HTML5**: 语义化结构和Canvas API
- **CSS3**: 现代样式和响应式布局
- **JavaScript ES6+**: 原生JavaScript，无外部依赖

### 核心算法
- **二进制解析**: 小端序数据读取
- **位图渲染**: 1位位图到像素的转换
- **内存优化**: 分页显示和虚拟滚动

### 数据格式支持
```
字体文件结构:
+------------------+
| 头部 (4字节)      | 字符数量 (uint32_t, 小端序)
+------------------+
| 字符信息表        | 每个字符8字节:
| (8 * N字节)      | - Unicode码点 (uint32_t)
|                  | - 宽度 (uint8_t)
|                  | - 高度 (uint8_t)  
|                  | - 位图偏移 (uint16_t)
+------------------+
| 位图数据          | 1位单色位图数据
| (变长)           | - 每字节8像素
|                  | - 行优先顺序
+------------------+
```

## 🔧 浏览器兼容性

### 推荐浏览器
- Chrome 80+
- Firefox 75+
- Safari 13+
- Edge 80+

### 必需功能
- FileReader API
- Canvas 2D Context
- ES6 Classes
- Async/Await

## 📝 使用示例

### 验证数字字符
1. 上传字体文件
2. 点击"🔢 数字 (0-9)"分类
3. 验证0-9字符显示是否正确

### 检查字母字符
1. 选择"🔠 大写字母 (A-Z)"或"🔡 小写字母 (a-z)"
2. 逐个检查字母形状
3. 使用详细视图查看像素级细节

### 搜索特定字符
1. 在搜索框输入字符，如"A"
2. 或输入Unicode码点，如"65"或"0x41"
3. 查看搜索结果

## 🐛 故障排除

### 文件加载失败
- 检查文件格式是否为.bin
- 确认文件大小合理（通常2MB左右）
- 验证文件是否损坏

### 字符显示异常
- 检查字体文件是否完整
- 确认数据格式符合预期
- 查看浏览器控制台错误信息

### 性能问题
- 大文件加载可能需要时间
- 使用分类功能减少显示字符数量
- 关闭其他浏览器标签页释放内存

## 📄 许可证

MIT License - 详见LICENSE文件

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个工具！

## 📞 支持

如有问题或建议，请创建GitHub Issue或联系开发者。
